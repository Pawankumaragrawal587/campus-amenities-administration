<%- include ('../partials/header') %>

<h1 class="center">Monthly Food Bookings</h1>

<div class="container">
    <form class="row g-3 justify-content-center" action="/guest/monthlyBookings/food" method="POST">
        <div class="col-auto">
            <label for="exampleFormControlInput1">Month and Year</label>
        </div>
        <div class="col-auto">
            <input type="month" class="form-control" id="exampleFormControlInput1" value="<% if(monthAndYear){ %><%=monthAndYear%><% } %>" name="monthAndYear">
        </div>
        <div class="col-auto">
            <button type="submit" class="btn btn-primary mb-3">View Bookings</button>
        </div>
    </form>
    <%if(!monthAndYear) {%>
        <h2 class="center">Select Month And Year and View Bookings</h2>
    <%} else if(bookings.length===0) {%>
        <h2 class="center">No Records Available for selected Month</h2>
    <%} else {%>
        <h3 class="center">Monthly Booking Amount: â‚¹ <%=totalBookingAmount%></h3>
        <h2 class="center">Bookings</h2>
    <%}%>
    <%bookings.forEach(function(request){%>
        <div class="card mtp">
            <div class="card-header">BookingID: <%=request.BookingID%></div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        CollegeID: <%=request.CollegeID%>
                    </div>
                    <div class="col-md-4">
                        BookingTime: <%=request.BookingTime.toString().slice(0, 33)%>
                    </div>
                    <div class="col-md-4">
                        PaymentMethod: <%=request.PaymentMethod%>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        Quantity: <%=request.Quantity%>
                    </div>
                    <div class="col-md-4">
                        Mobile: <%=request.Mobile%>
                    </div>
                    <div class="col-md-4">
                        Address: <%=request.Address%>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        OrderDate: <%=request.OrderDate.toISOString().slice(0, 10)%>
                    </div>
                    <div class="col-md-4">
                        Type: <%=request.Type%>
                    </div>
                    <div class="col-md-4">
                        Cost: <%=request.Cost%>
                    </div>
                </div>
            </div>
        </div>
    <%})%>
</div>

<%- include ('../partials/footer') %>